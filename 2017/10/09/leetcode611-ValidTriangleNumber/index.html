<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>leetcode611 Valid Triangle Number | StarSea</title><link rel="stylesheet" type="text/css" href="/css/normalize.css"><link rel="stylesheet" type="text/css" href="/css/highlight.css"><link rel="stylesheet" type="text/css" href="/css/font.css"><link rel="stylesheet" type="text/css" href="/css/noise.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"></head><body><!-- gallery that comes before the header--><article class="wrapper"><div class="post-main"><div class="nav"><nav class="container"><a href="/" class="sidebar-nav-item active">Home</a><a href="/archives" class="sidebar-nav-item">Archives</a><a href="/about" class="sidebar-nav-item">About</a></nav><div class="container post-meta"><div class="post-tags"><a class="post-tag-link" href="/tags/array/">array</a><a class="post-tag-link" href="/tags/leetcode/">leetcode</a></div><div class="post-time">2017-10-09</div></div></div><div class="container post-header"><h1>leetcode611 Valid Triangle Number</h1></div><div class="container post-content"><h2 id="leetcode-611-Valid-Triangle-Number"><a href="#leetcode-611-Valid-Triangle-Number" class="headerlink" title="leetcode#611 Valid Triangle Number"></a>leetcode#611 Valid Triangle Number</h2><blockquote>
<p>Given an array consists of non-negative integers, your task is to count the number of triplets chosen from the array that can make triangles if we take them as side lengths of a triangle.</p>
<p><strong>Example 1:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&gt;Input: [2,2,3,4]</div><div class="line">&gt;Output: 3</div><div class="line">&gt;Explanation:</div><div class="line">&gt;Valid combinations are: </div><div class="line">&gt;2,3,4 (using the first 2)</div><div class="line">&gt;2,3,4 (using the second 2)</div><div class="line">&gt;2,2,3</div><div class="line">&gt;</div><div class="line">&gt;</div></pre></td></tr></table></figure>
</blockquote>
<p>&gt;</p>
<blockquote>
<p><strong>Note:</strong></p>
<ol>
<li>The length of the given array won’t exceed 1000.</li>
<li>The integers in the given array are in the range of [0, 1000].</li>
</ol>
</blockquote>
<h4 id="解释"><a href="#解释" class="headerlink" title="解释"></a>解释</h4><p>给定一个元素为非负整数的数组，要求找出一种组合——组合中有三个元素，三个元素可以<strong>满足构成三角形三边的条件</strong>，返回该组合的数量。</p>
<ul>
<li>所给数组的长度不超过1000；</li>
<li>数组中整数的范围为：[0,1000]。</li>
</ul>
<h4 id="我的解法"><a href="#我的解法" class="headerlink" title="我的解法"></a>我的解法</h4><p>三角形三条边所需要满足的条件为：<code>a+b&gt;c &amp;&amp; b+c&gt;a &amp;&amp; a+c&gt;b</code> ，三个条件看上去有点多，而且实现三个比较既耗时又耗资源。</p>
<p>思考一下是不是可以简化？那么先将数组元素进行<strong>排序</strong>吧！可以看到，如果有序：<code>a&lt;=b&lt;=c</code> ，那么只需要<code>a+b&gt;c</code> 即可。 这么一来需要先后取三个元素，用前两个元素相加的值与第三个元素值进行比较，那么需要排除两个情况：</p>
<ul>
<li>零元素的情况，只有除去零元素，<code>a&lt;=b&lt;=c &amp;&amp; a+b&gt;c</code> 的条件才可以成立；</li>
<li>除去零元素之后，数组元素不足3个。</li>
</ul>
<p>接下来，就是依次取三个元素，进行比较的过程了。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">class Solution &#123;</div><div class="line">    public int triangleNumber(int[] nums) &#123;</div><div class="line">        if(nums.length == 0) return 0;</div><div class="line">        Arrays.sort(nums);</div><div class="line">        int begin = 0;</div><div class="line">        while(nums[begin] == 0 &amp;&amp; begin &lt; nums.length - 1) &#123;</div><div class="line">            begin++;</div><div class="line">        &#125;</div><div class="line">        if(nums.length - begin &lt; 2) return 0;</div><div class="line">        </div><div class="line">        int count = 0;</div><div class="line">        while(begin &lt; nums.length - 2) &#123;</div><div class="line">            int mid = begin + 1;</div><div class="line">            while(mid &lt; nums.length - 1) &#123;</div><div class="line">                int end = mid + 1;</div><div class="line">                while(end &lt; nums.length) &#123;</div><div class="line">                    if(nums[begin] + nums[mid] &gt; nums[end]) &#123;</div><div class="line">                        count++;</div><div class="line">                        end++;</div><div class="line">                    &#125;</div><div class="line">                    else</div><div class="line">                        break;</div><div class="line">                &#125;</div><div class="line">                mid++;</div><div class="line">            &#125;</div><div class="line">            begin++;</div><div class="line">        &#125;</div><div class="line">        return count;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="大神解法"><a href="#大神解法" class="headerlink" title="大神解法"></a>大神解法</h4><p>解法一：取一个最小的和两个最大的</p>
<p>先排序，然后三个值分别位于数组开头（最小的数）A和数组的末尾两个（两个最大的数）B、C，每次比较的时候，判断：A+B&gt;C?，如果是的，<strong>说明A到B之间的任意一个数与B相加都会满足A+B&gt;C</strong>，即可以组成三角形（因为A到B之间的任何一个数都大于A），所以计数值累加(B-A)；如果不是，那么A往后移动一位，继续上述比较（此时，B和C位置不动），直到A的位置到达B的位置之后，B和C需要同时往前移动一位，继续上述比较。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">public static int triangleNumber(int[] A) &#123;</div><div class="line">    Arrays.sort(A);</div><div class="line">    int count = 0, n = A.length;</div><div class="line">    for (int i=n-1;i&gt;=2;i--) &#123;</div><div class="line">        int l = 0, r = i-1;</div><div class="line">        while (l &lt; r) &#123;</div><div class="line">            if (A[l] + A[r] &gt; A[i]) &#123;</div><div class="line">                count += r-l;</div><div class="line">                r--;</div><div class="line">            &#125;</div><div class="line">            else l++;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    return count;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>解法二：类似的方法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">public class Solution &#123;</div><div class="line">    public int triangleNumber(int[] nums) &#123;</div><div class="line">        int result = 0;</div><div class="line">        if (nums.length &lt; 3) return result;</div><div class="line">        </div><div class="line">        Arrays.sort(nums);</div><div class="line"></div><div class="line">        for (int i = 2; i &lt; nums.length; i++) &#123;</div><div class="line">            int left = 0, right = i - 1;</div><div class="line">            while (left &lt; right) &#123;</div><div class="line">                if (nums[left] + nums[right] &gt; nums[i]) &#123;</div><div class="line">                    result += (right - left);</div><div class="line">                    right--;</div><div class="line">                &#125;</div><div class="line">                else &#123;</div><div class="line">                    left++;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        </div><div class="line">        return result;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h4><p>不仔细分析会以为要有三层循环，最里层的循环还要有三次比较，但是<strong>结合三角形的性质和排序分析</strong>之后，可以仅用一次比较和两层循环把问题解决。</p>
</div></div><div class="post-main post-comment"></div></article><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.css"><script src="//cdn.bootcss.com/jquery/2.0.3/jquery.min.js"></script><script src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js"></script><script>$(document).ready(function() {
    $(".fancybox").fancybox();
});
</script></body></html>